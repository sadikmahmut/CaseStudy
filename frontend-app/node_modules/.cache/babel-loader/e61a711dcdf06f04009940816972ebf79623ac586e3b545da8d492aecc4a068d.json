{"ast":null,"code":"import _slicedToArray from\"C:/Users/Sadik/Desktop/CaseStudy/CaseStudy/frontend-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route,Routes,Navigate}from\"react-router-dom\";import axios from\"axios\";import\"./App.css\";import Home from\"./Home\";import Navbar from\"./Navbar\";import Registration from\"./Registration\";import Login from\"./Login\";import Configuration from\"./Configuration\";import background from\"./background.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];useEffect(function(){var token=localStorage.getItem('token');if(token){// Call a function to validate the token and set the user\nvalidateTokenAndSetUser(token);}},[]);var validateTokenAndSetUser=function validateTokenAndSetUser(token){var validateUrl='https://localhost:44388/api/Auth/ValidateToken';axios.post(validateUrl,{token:token}).then(function(response){var userData=response.data.user.username;var userId_=response.data.user.id;// Set the user data\nsetUser(userData);setUserId(userId_);}).catch(function(error){// Handle token validation errors here (e.g., expired token)\n// You can redirect to the login page or perform any other action here\n// For now, we'll clear the token from localStorage and log the user out\nlocalStorage.removeItem('token');setUser(null);setUserId(null);});};var handleLogout=function handleLogout(){localStorage.removeItem('token');setUser(null);setUserId(null);};var appStyle={backgroundImage:\"url(\".concat(background,\")\"),// Use the imported image\nbackgroundSize:\"cover\",// Adjust as needed\nbackgroundPosition:\"center\",// Adjust as needed\nminHeight:\"100vh\"// Ensure it covers the entire viewport height\n};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",style:appStyle,children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){return/*#__PURE__*/_jsx(Navigate,{to:\"/home\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(Home,{user:user,userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUser:setUser,setUserId:setUserId})}),/*#__PURE__*/_jsx(Route,{path:\"/configuration\",element:/*#__PURE__*/_jsx(Configuration,{userId:userId})}),/*#__PURE__*/_jsx(Route,{path:\"/registration\",element:/*#__PURE__*/_jsx(Registration,{})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","axios","Home","Navbar","Registration","Login","Configuration","background","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","userId","setUserId","token","localStorage","getItem","validateTokenAndSetUser","validateUrl","post","then","response","userData","data","username","userId_","id","catch","error","removeItem","handleLogout","appStyle","backgroundImage","concat","backgroundSize","backgroundPosition","minHeight","className","style","children","onLogout","path","element","to","exact","render"],"sources":["C:/Users/Sadik/Desktop/CaseStudy/CaseStudy/frontend-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route, Routes, Navigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport Home from \"./Home\";\nimport Navbar from \"./Navbar\";\nimport Registration from \"./Registration\";\nimport Login from \"./Login\";\nimport Configuration from \"./Configuration\";\nimport background from \"./background.png\"; \n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [userId, setUserId] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Call a function to validate the token and set the user\n      validateTokenAndSetUser(token);\n    }\n  }, []);\n\n  const validateTokenAndSetUser = (token) => {\n    const validateUrl = 'https://localhost:44388/api/Auth/ValidateToken';\n  \n    axios.post(validateUrl, { token })\n      .then((response) => {\n        const userData = response.data.user.username;\n        const userId_ = response.data.user.id;\n        // Set the user data\n        setUser(userData);\n        setUserId(userId_);\n      })\n      .catch((error) => {\n        // Handle token validation errors here (e.g., expired token)\n        // You can redirect to the login page or perform any other action here\n        // For now, we'll clear the token from localStorage and log the user out\n        localStorage.removeItem('token');\n        setUser(null);\n        setUserId(null);\n      });\n  }\n  \n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    setUserId(null);\n  };\n\n  const appStyle = {\n    backgroundImage: `url(${background})`, // Use the imported image\n    backgroundSize: \"cover\", // Adjust as needed\n    backgroundPosition: \"center\", // Adjust as needed\n    minHeight: \"100vh\", // Ensure it covers the entire viewport height\n  };\n\n  return (\n    <div className=\"App\" style={appStyle}>\n      <Router>\n        <Navbar user={user} onLogout={handleLogout} />\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/home\" />} />\n          <Route exact path=\"/\" render={() => <Navigate to=\"/home\" />} />\n          <Route path=\"/home\" element={<Home user={user} userId={userId} />} />\n          <Route path=\"/login\" element={<Login setUser={setUser} setUserId={setUserId} />} />\n          <Route path=\"/configuration\" element={<Configuration userId={userId} />} />\n          <Route path=\"/registration\" element={<Registration />} />\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}